import{Q as C}from"./QCardSection-D6dcLYSP.js";import{b as E,Q as F,a as Q}from"./QInput-u-P-6y-a.js";import{l as k,h as b,G as I,i as A,H as L,C as j,m as R,n as O,k as D,v as K,I as B,J as M,K as N,_ as U,o as G,a as H,w as p,d as m,e as c,x as J,Q as T}from"./index-CmSOulEF.js";import{Q as $}from"./QCard-uzEHc3zB.js";import"./use-dark-CwudlWhk.js";const z=k({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(r,{slots:o,emit:f}){const l=D(),u=b(null);let s=0;const a=[];function _(e){const d=typeof e=="boolean"?e:r.noErrorFocus!==!0,g=++s,w=(t,n)=>{f(`validation${t===!0?"Success":"Error"}`,n)},P=t=>{const n=t.validate();return typeof n.then=="function"?n.then(i=>({valid:i,comp:t}),i=>({valid:!1,comp:t,err:i})):Promise.resolve({valid:n,comp:t})};return(r.greedy===!0?Promise.all(a.map(P)).then(t=>t.filter(n=>n.valid!==!0)):a.reduce((t,n)=>t.then(()=>P(n).then(i=>{if(i.valid===!1)return Promise.reject(i)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return g===s&&w(!0),!0;if(g===s){const{comp:n,err:i}=t[0];if(i!==void 0&&console.error(i),w(!1,n),d===!0){const V=t.find(({comp:q})=>typeof q.focus=="function"&&K(q.$)===!1);V!==void 0&&V.comp.focus()}}return!1})}function x(){s++,a.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function y(e){e!==void 0&&B(e);const d=s+1;_().then(g=>{d===s&&g===!0&&(r.onSubmit!==void 0?f("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function h(e){e!==void 0&&B(e),f("reset"),M(()=>{x(),r.autofocus===!0&&r.noResetFocus!==!0&&v()})}function v(){E(()=>{if(u.value===null)return;const e=u.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||u.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||u.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(u.value.querySelectorAll("[tabindex]"),d=>d.tabIndex!==-1);e?.focus({preventScroll:!0})})}I(N,{bindComponent(e){a.push(e)},unbindComponent(e){const d=a.indexOf(e);d!==-1&&a.splice(d,1)}});let S=!1;return A(()=>{S=!0}),L(()=>{S===!0&&r.autofocus===!0&&v()}),j(()=>{r.autofocus===!0&&v()}),Object.assign(l.proxy,{validate:_,resetValidation:x,submit:y,reset:h,focus:v,getValidationComponents:()=>a}),()=>R("form",{class:"q-form",ref:u,onSubmit:y,onReset:h},O(o.default))}}),W={__name:"PageLogin",setup(r,{expose:o}){o();const f=b(null),l=b(null),s={email:f,password:l,login:()=>{},ref:b};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},X={class:"row justify-center q-pa-md"},Y={class:"col-12 col-lg-4 col-md-6"},Z={class:"col-12 col-sm-6 col-md-4 col-lg-3"},ee={class:"text-right"};function te(r,o,f,l,u,s){return G(),H(F,{class:"login"},{default:p(()=>[m("div",X,[m("div",Y,[o[3]||(o[3]=m("div",{class:"text-white"},null,-1)),m("div",Z,[c($,{class:"q-pa-md q-ma-sm bg-grey-2 shadow-2 custom-card"},{default:p(()=>[c(C,{class:"no-padding q-mb-md"},{default:p(()=>o[2]||(o[2]=[m("h5",{class:"h5 text-bold no-margin"},"Login",-1)])),_:1}),c(C,{class:"no-padding"},{default:p(()=>[c(z,{onSubmit:J(l.login,["prevent"]),class:"q-col-gutter-y-md"},{default:p(()=>[c(Q,{filled:"",dense:"",modelValue:l.email,"onUpdate:modelValue":o[0]||(o[0]=a=>l.email=a),standout:"bg-white","stack-label":"",label:"Email",type:"text"},null,8,["modelValue"]),c(Q,{filled:"",dense:"",modelValue:l.password,"onUpdate:modelValue":o[1]||(o[1]=a=>l.password=a),standout:"bg-white","stack-label":"",label:"Password",type:"password",autocomplete:"on"},null,8,["modelValue"]),m("div",ee,[c(T,{dense:"",class:"q-px-md",label:"Login",type:"submit",color:"primary",icon:"lock"})])]),_:1})]),_:1})]),_:1})])])])]),_:1})}const ie=U(W,[["render",te],["__file","PageLogin.vue"]]);export{ie as default};
